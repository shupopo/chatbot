# 生成AIチャットボット開発 要件定義書

## 1. プロジェクト概要
本プロジェクトでは、LangChainを用いた **Retrieval-Augmented Generation (RAG)** と  
**Agents（llm-mathツールなど）** を組み合わせた生成AIチャットボットを開発する。  
最終的にWebアプリケーション化し、**Streamlit Community Cloud** にデプロイする。

---

## 2. 開発環境
- 開発エディタ: Visual Studio Code
- 言語: Python 3.10+
- フレームワーク:
  - LangChain
  - OpenAI API
  - Streamlit
- ベクトルDB: FAISS (オンメモリ)
- デプロイ環境: Streamlit Community Cloud

---

## 3. 機能要件

### 3.1 チャット機能（基本機能）
- ユーザーの入力を受け取り、LLMを通じて自然言語で回答を生成する。
- 質問の種類に応じて **2つのモード** を自動的に利用する：
  - **RAGモード**: アップロードされた社内文書やPDFファイルを参照し回答する。
  - **Agentsモード**: 計算や外部ツール呼び出しが必要な場合はエージェントを利用する。

### 3.2 RAG (Retrieval-Augmented Generation)
- ユーザーが知識ベースに関連する質問をした場合、  
  PDF/TXT/CSVファイルを分割・ベクトル化し検索。  
- 検索結果をもとにLLMが回答を生成する。
- 誤情報防止のため、資料に該当がない場合は  
  「資料に該当箇所が見当たりません」と回答する。

### 3.3 Agents（AIエージェント）
- LangChainのエージェントを利用し、ツールを呼び出す。
- ツール例：
  - **llm-math**: 割合計算・四則演算などを正確に処理。
- 将来的にWeb検索APIやカレンダーAPIの追加も可能。

### 3.4 UI (Streamlit)
- 入力フォームを設置し、ユーザーが自由に質問できる。
- チャット履歴を画面に表示する。
- 回答とともに「根拠ファイル（ファイル名＋ページ番号）」を表示する。
- アプリのタイトルと簡単な説明文をヘッダーに記載する。

---

## 4. 非機能要件
- **セキュリティ**:
  - OpenAI APIキーは環境変数から読み込む。
  - GitHub等に直書きしない。
- **可用性**:
  - Streamlit Community Cloud上で常時稼働。
- **保守性**:
  - RAGとAgentsをモジュールとして分離実装。
  - 設定ファイルでモデル名やパラメータを変更可能にする。

---

## 5. 想定利用シナリオ
1. ユーザーが「働き方改革の基本的な考え方を教えてください」と質問。  
   → RAGが資料を検索 → 回答を返す。  

2. ユーザーが「320の15%は？」と質問。  
   → Agentsがllm-mathツールを利用 → 正確に数値計算を返す。  

3. ユーザーが続けて「もう一度最初の質問に答えて」と入力。  
   → 会話履歴を踏まえ、初回と同様の回答を返す。  

---

## 6. 今後の拡張
- 外部API（Google検索、社内DB連携）の追加。
- 回答のスコアリングと改善（Callbacks利用）。
- ユーザー認証機能の追加（社内利用を想定）。

---

## 7. 成果物
- VSCodeで開発したPythonプロジェクト一式
- `requirements.txt`（必要ライブラリ）
- Streamlitアプリ (`app.py`)
- デプロイ済みURL（Streamlit Community Cloud）

